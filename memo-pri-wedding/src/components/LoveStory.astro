---
// Props que se podrían pasar para personalizar
---

<!-- Swiper CSS is now imported in the script -->

<section id="love-story" class="section bg-white overflow-hidden py-8 md:py-12 px-0 relative">
  <img src="/images/flores_nuestra_historia.png" alt="Flower decoration" class="absolute top-0 left-0 w-20 md:w-40 h-auto z-20" />
  
  <div class="container mx-auto px-4">
    <h2 class="section-title text-[#004AAD] font-lichtner">Nuestra Historia</h2>

    <div class="max-w-3xl mx-auto text-center mb-16 px-8">
      <p class="text-lg text-[#004AAD] leading-relaxed font-script">
        Somos Pri y Memo.
        Nos conocimos como no podía ser de otra forma: en una carrera de obstáculos.
        Ella decía que su abuelo fue presidente de Patronato.
        Él prometía que podía ahorrarle en la factura de luz… y que si lo lograba, le debía una birra.
        Spoiler: hubo ahorro, y todavía le debe la birra.
        <br><br>
        Desde entonces, compartimos caminos, risas, viajes, naturaleza… y muchos sueños.
        <br><br>
        Un día, tomando mate en una playa de Fuerteventura, el último mate le tocó a Pri.
        Y como dice la tradición en Argentina: el que toma el último mate, se casa.
        Así, entre arena y viento, llegó la propuesta. Simple y auténtica, como nosotros.
        <br><br>
        Hoy queremos celebrar el amor con las personas que más queremos.
        Nos llena de alegría saber que vienen desde distintos rincones de Argentina, de Barcelona (nuestra casa hoy), y de muchos otros lugares.
        Gracias por estar. Por venir. Por compartir este momento con nosotros.
      </p>
    </div>
  </div>
  
  <!-- Swiper Carousel -->
  <div class="photo-carousel-container w-full relative">
    <!-- Slider main container -->
    <div class="swiper love-story-swiper overflow-hidden">
      <!-- Additional required wrapper -->
      <div class="swiper-wrapper">
        <!-- Slides are dynamically generated in script -->
      </div>
      <!-- Pagination -->
      <div class="swiper-pagination"></div>
    </div>
  </div>
      
</section>

<!-- Swiper JS is now imported in the script -->

<script>
  // Import Swiper and its modules/styles
  import Swiper from 'swiper';
  import 'swiper/css'; // Core Swiper styles
  import 'swiper/css/pagination'; // Pagination styles
  // If using other modules like Navigation, FreeMode, etc., import their CSS too if needed.
  // For FreeMode with momentum, core CSS is usually sufficient.

  document.addEventListener('DOMContentLoaded', () => {
    const imageNames = Array.from({ length: 10 }, (_, i) => `love_story_${i + 1}.jpeg`);
    const imageBaseUrl = '/images/love-story/';
    const swiperWrapper = document.querySelector('.love-story-swiper .swiper-wrapper');

    if (!swiperWrapper) {
      console.error("Swiper wrapper not found!");
      return;
    }

    // Generate slides dynamically
    imageNames.forEach(imageName => {
      const slide = document.createElement('div');
      slide.classList.add('swiper-slide');

      const img = document.createElement('img');
      img.src = `${imageBaseUrl}${imageName}`;
      img.alt = 'Photo from our story';
      img.loading = 'lazy';
      img.classList.add('w-full', 'h-full', 'object-cover');

      slide.appendChild(img);
      swiperWrapper.appendChild(slide);
    });

    // Initialize Swiper (configuration remains the same)
    const swiper = new Swiper('.love-story-swiper', {
      direction: 'horizontal',
      loop: false,
      slidesPerView: 'auto',
      spaceBetween: 15,
      freeMode: {
        enabled: true,
        sticky: false,
        momentumBounce: true,
        momentumRatio: 1.0,
        momentumVelocityRatio: 1.0,
      },
      pagination: {
        el: '.swiper-pagination',
        clickable: true,
      },
      grabCursor: true,
      watchSlidesProgress: false,
      observer: true,
      observeParents: true,
      a11y: {
        enabled: true,
        prevSlideMessage: 'Previous slide',
        nextSlideMessage: 'Next slide',
        paginationBulletMessage: 'Go to slide {{index}}',
      },
    });

  });
</script>

<style is:global>
  /* Styles are now global */
  .love-story-swiper {
    width: 100%;
    padding-bottom: 30px; /* Add padding at the bottom to avoid overlap with pagination */
  }

  .swiper-wrapper {
    align-items: center; 
  }

  .swiper-slide {
    /* --- Mobile First --- */
    width: 80%; /* Show ~1.2 slides */
    aspect-ratio: 1 / 1 !important; /* Maintain square shape - Added !important */
    filter: grayscale(1) !important; /* Apply grayscale filter - Added !important */
    overflow: hidden; 
    box-sizing: border-box;
    flex-shrink: 0; 
  }

  /* --- Desktop --- */
  @media (min-width: 768px) { /* Tailwind 'md' breakpoint */
    .swiper-slide {
      width: 20%; /* Show 5 slides */
      /* aspect-ratio and filter inherit from mobile first */
    }
  }

  .swiper-slide img {
    display: block; 
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  /* --- Pagination Dots Styling --- */
  .swiper-pagination {
    position: absolute; 
    bottom: 5px; 
    left: 0; 
    width: 100%; 
    text-align: center;
  }

  .swiper-pagination-bullet {
    width: 8px;
    height: 8px;
    background-color: #ccc; 
    opacity: 0.5;
    border-radius: 50%;
    display: inline-block;
    margin: 0 4px;
    transition: background-color 0.3s, opacity 0.3s;
  }

  .swiper-pagination-bullet-active {
    background-color: #004AAD; 
    opacity: 1;
  }
</style>