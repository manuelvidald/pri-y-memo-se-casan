---
// Props que se podrían pasar para personalizar
---

<!-- Swiper CSS is now imported in the script -->

<section id="love-story" class="section bg-white overflow-hidden py-8 md:py-12 px-0 relative">
  <img src="/images/flores_nuestra_historia.png" alt="Flower decoration" class="absolute top-0 left-0 w-20 md:w-40 h-auto z-20" />
  
  <div class="container mx-auto px-4">
    <h2 class="section-title text-[#004AAD] font-lichtner">Nuestra Historia</h2>

    <div class="max-w-3xl mx-auto text-center mb-16 px-8">
      <p class="text-lg text-[#004AAD] leading-relaxed font-script">
        Somos Pri y Memo.
        Nos conocimos como no podía ser de otra forma: en una carrera de obstáculos.
        Ella decía que su abuelo fue presidente de Patronato.
        Él prometía que podía ahorrarle en la factura de luz… y que si lo lograba, le debía una birra.
        Spoiler: hubo ahorro, y todavía le debe la birra.
        <br><br>
        Desde entonces, compartimos caminos, risas, viajes, naturaleza… y muchos sueños.
        <br><br>
        Un día, tomando mate en una playa de Fuerteventura, el último mate le tocó a Pri.
        Y como dice la tradición en Argentina: el que toma el último mate, se casa.
        Así, entre arena y viento, llegó la propuesta. Simple y auténtica, como nosotros.
        <br><br>
        Hoy queremos celebrar el amor con las personas que más queremos.
        Nos llena de alegría saber que vienen desde distintos rincones de Argentina, de Barcelona (nuestra casa hoy), y de muchos otros lugares.
        Gracias por estar. Por venir. Por compartir este momento con nosotros.
      </p>
    </div>
  </div>
  
  <!-- Swiper Carousel Section -->
  <div class="photo-carousel-container w-full relative">
    <!-- Navigation Buttons -->
    <div class="flex justify-end space-x-2 mb-2 relative z-10 px-4">
      <div class="swiper-button-prev love-story-swiper-prev cursor-pointer">
        <svg class="w-5 h-5 text-[#004AAD]" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24">
          <path d="M15 18l-6-6 6-6"/>
        </svg>
      </div>
      <div class="swiper-button-next love-story-swiper-next cursor-pointer">
        <svg class="w-5 h-5 text-[#004AAD]" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24">
          <path d="M9 18l6-6-6-6"/>
        </svg>
      </div>
    </div>

    <!-- Slider main container -->
    <div class="swiper love-story-swiper overflow-hidden">
      <!-- Additional required wrapper -->
      <div class="swiper-wrapper">
        <!-- Slides are dynamically generated in script -->
      </div>
    </div>
  </div>
      
</section>

<!-- Swiper JS is now imported in the script -->

<script>
  // Import Swiper bundle and its CSS
  import Swiper from 'swiper/bundle'; 
  import 'swiper/css/bundle'; // Includes core, pagination, navigation etc.

  document.addEventListener('DOMContentLoaded', () => {
    const imageNames = Array.from({ length: 10 }, (_, i) => `love_story_${i + 1}.jpeg`);
    const imageBaseUrl = '/images/love-story/';
    const swiperWrapper = document.querySelector('.love-story-swiper .swiper-wrapper');

    if (!swiperWrapper) {
      console.error("Swiper wrapper not found!");
      return;
    }

    imageNames.forEach(imageName => {
      const slide = document.createElement('div');
      slide.classList.add('swiper-slide');
      const img = document.createElement('img');
      img.src = `${imageBaseUrl}${imageName}`;
      img.alt = 'Photo from our story';
      img.loading = 'lazy';
      img.classList.add('w-full', 'h-full', 'object-cover');
      slide.appendChild(img);
      swiperWrapper.appendChild(slide);
    });

    // Initialize Swiper
    const swiper = new Swiper('.love-story-swiper', {
      direction: 'horizontal',
      loop: false,
      slidesPerView: 'auto',
      spaceBetween: 15,
      freeMode: {
        enabled: true,
        sticky: false,
        momentumBounce: true,
        momentumRatio: 0.7,
        momentumVelocityRatio: 0.7,
      },
      navigation: {
        nextEl: '.love-story-swiper-next',
        prevEl: '.love-story-swiper-prev',
      },
      grabCursor: true,
      watchSlidesProgress: false,
      observer: true,
      observeParents: true,
      a11y: {
        enabled: true,
      },
    });

  });
</script>

<style is:global>
  /* Styles are now global */
  .love-story-swiper {
    width: 100%;
  }

  .swiper-wrapper {
    align-items: center; 
  }

  .swiper-slide {
    width: 80%; 
    aspect-ratio: 1 / 1 !important;
    filter: grayscale(1) !important;
    overflow: hidden; 
    box-sizing: border-box;
    flex-shrink: 0; 
  }

  /* --- Desktop --- */
  @media (min-width: 768px) { 
    .swiper-slide {
      width: 20%; 
    }
  }

  .swiper-slide img {
    display: block; 
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  /* --- Navigation Arrows Custom Styling --- */
  .love-story-swiper-prev,
  .love-story-swiper-next {
    position: static; 
    color: #004AAD;
    transition: opacity 0.3s;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .swiper-button-disabled {
    opacity: 0.35;
    cursor: auto;
    pointer-events: none;
  }
</style>